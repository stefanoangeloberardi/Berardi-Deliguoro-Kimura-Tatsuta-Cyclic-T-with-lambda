\section{Solvable terms and Limits}




    Dear Daisuke,

    I have a simpler example of different limits we can equate:

lambda x.S(x)    =    cond(1,cond(2,cond(3, ...)))
    Now I have the impression that no computable set of reductions can equate two limits representing the same map in system T.

    Best, Stefano



Il 05/06/2025 23:33, Stefano Berardi ha scritto:
>
>
> Il 04/06/2025 06:57, Daisuke Kimura ha scritto:
>>
>>>  are they 6?
>> yes.
>>
>>
>>> a question:
>> ..
>>> if we equate terms with the same limit normal forms?
>>
>> Maybe I got an answer to this question.
>> I wrote a note for it, put it in a new directory "discussion-equality",
>> and git-pushed to the first repo (the same repo as the 6 papers).
>> Please check it.
>
>     I think that you formally defined the notion of normal limit as largest bisimulation. A formal definition of normal limit is something we should do, but my question was different: if we equate two different limits, do we get an inconsistency?
>
>     In lambda-calculus we have the problem that eta-convertible terms have different limits (in lambda-calculus, limits are bohm trees), and yet they can be consistenty equated. This is the case for y and lambda x.y(x). If I remember correctly, two solvable lambda terms can be equated if and only if have the same eta-bohm-tree, that is, have two limits equal but for eta-expansion.
>
>     My guess is that we have many more limits we may consistently equate in our calculus. Say, we may equate :
>
>  S( cond(x,lambda x.y(x)) (z) )    =    cond(S(x),lambda x.S(y(x)) (z)
>
>     So my initial guess was wrong.
>> > my guess is that we get the maximal equality among
>> > cyclic lambda terms equating all unsolvable.
>>
>> I don't see what is unsolvable. Is it non-terminating terms in finite reductions?
>> If so, I think it's a weak condition because, for example,
>> f = cond(I0,f)
>> g = cond(I0,cond(1,g))
>> are non-terminating, where I = Î»x.x. But their limit terms are different.
>
>     No, unsolvability is not non-termination. In fact several formal definitions are missing here.
>
>     Let us define a main path as the unique path moving left except in cond(a,b)(t), where it moves right. We define a head redex as the first redex in the main path. We say that t is in head normal form if the main path is finite and with no head redex. t is solvable if some redex of t is in head normal form. t is unsolvable if t is not solvable.
>
>     Solvability is related to the notion of limit, definition which is in fact a missing point in our paper. the limit of t is bottom (undefined) if t is unsolvable, otherwise the limit is obtained by reducing t to some head normal form, taking the first symbol of the head normal form and then taking the limit of all immediate subterms, cyclically. Limit is not unique because we can reduce infinitely many times a term while avoiding to contract one particular redex. However, as remarked by Klop, at least one limit is normal. Infinite Church-rosser implies that the normal limit is unique. Normal limit is what you expressed by your maximal bisimulation.
>
>     Without GTC, the limit can be bottom, or can include some bottom subterms, as it happens for bohm trees in lambda calculus.  In our paper, we can prove that all limit of all terms with GTC include no bottom. This is a corollary of our normalization result: head-reduction is 0-safe and therefore it always terminates in a head-normal form. GTC is preserved by reductions and subterms. If we recursively head-normalize immediate subterms of a head-normal form we always reduce terms with GTC, therefore we always have solvable subterms.
>
>     As an example, your terms f and g are non-terminating but solvable terms with different limits. The limit normal form of f is cond(0,cond(0, cond(0, ...))) and the limit normal form of g is cond(0,cond(1, cond(1, ...))).
>
>     Best Regards Stefano
>
>
>> Best regards,
>> Daisuke
>>
>>
>> On 5/27/25 18:57, Stefano Berardi wrote:
>>>     ok I downloaded the 6 (are they 6?) papers you added. the 3 papers about letrec look tangent to our work, even if we should quote them. the 3 papers about klop infinitary lambda calculus should indeed be quoted as the main motivation for our paper. in fact, we study a sufficient convergence condition for infinitary klop terms.
>>>
>>>      a question: which kind of equality we have for our circular lambda terms, if we equate terms with the same limit normal forms? this is a question we could expect for our paper and that we should anticipate. my guess is that we get the maximal equality among cyclic lambda terms equating all unsolvable. I think we should be able to prove this fact from the corresponding result for pure lambda calculus. what do you think? we do not have to prove this for CSL 2026 yet.
>>>
>>>      best, stefano
>>>
>>>
>>> Il 17/05/2025 09:55, Daisuke Kimura ha scritto:
>>>>
>>>> Perhaps you checked the MFPS25 repo.
>>>>
>>>> I put the files on the first repo:
>>>> https://github.com/stefanoangeloberardi/Berardi-Deliguoro-Kimura-Tatsuta-Cyclic-T-with-lambda
>>>>
>>>>
>>>> Best,
>>>> Daisuke
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On 5/17/25 16:08, Stefano Berardi wrote:
>>>>> I cannot see it. Possibly you should invite us, or add permissions? Stefano
>>>>>
>>>>> Il 17/05/2025 06:24, Daisuke Kimura ha scritto:
>>>>>> I got the papers that the reviewer-1 listed that could relate to this point.
>>>>>> They are already put in the following directory on our repository:
>>>>>> 2024-03-25-Material-for-the-paper-on-cyclic-lambda/

{\Large\bf About equality on infinite terms}

\vspace{10pt}

\begin{remark}
  We assume the following (not formally shown yet):
  \begin{center}
    Any $t\in \GTC$ has a unique normal form $\Lim{t}$ (limit of safe-reductions).
  \end{center}
\end{remark}

\noindent{\bf Purpose of this article}\quad
We want to characterlize the limit equivalence of terms in $\GTC$, 
which means two terms have the same limit: $\Lim{t} = \Lim{u}$. 
More formally, we try to coinductively define a binary relation $\approx$ that satisfies:
\[
t \approx u \quad \Longleftrightarrow \quad \Lim{t} = \Lim{u}. 
\]

A {\em 1-context} is a finite context with several number of distinguished holes $[-]$.

\begin{definition}[0-context]
  \begin{center}
    $C ::= x \mid \lambda x.C \mid CC \mid 0 \mid \Suc{C} \mid \Cond{C}{[-]}$
  \end{center}
\end{definition}

We write $C[-,-,-]$ if $C$ has three holes, and write $C[t,u,v]$ for the resulting term
obtained by filling terms $t,u,v$ for the holes. 

A term can be divided into the 0-context part and the terms part filling the holes of the 0-context,
namely the following lemma holds. 
\begin{lemma}
  For any $t\in \LAMBDA$, there uniquely exists $(C,\vec{u})$ such that $t = C[\vec{u}]$. 
\end{lemma}

For a binary relation $R$ on terms,
we write $(t_1,\ldots,t_n)R(u_1,\ldots,u_n)$ if $t_iRu_i$ holds for all $i$. 

Let $\NFZ$ be the set of $0$-safe normal forms. 
Note that if both $C_1[\vec{t_1}]$ and $C_2[\vec{t_2}]$ are $0$-safe normal forms of $t$, then $C_1=C_2$.
  
\begin{definition}[0-bisimulation]\rm
  A binary relation $R$ on $\LAMBDA$ is said to be a {\em 0-bisimulation} if it satisfies the following:
  \begin{center}
    $tRu$ and $t \nsafeReducesAst{0} C_t[\vec{t}] \in \NFZ$ and $u \nsafeReducesAst{0} C_u[\vec{u}] \in \NFZ$
    \\
    \quad
    implies
    \quad
    $C_t = C_u$ and $\vec{t}R\vec{u}$. 
  \end{center}
  
  We define $\approx$ by the largest $0$-bisimulation.
\end{definition}

\begin{lemma}
  $\approx$ is an equivalence relation.
\end{lemma}
\begin{proof}
  Reflexivity for $\approx$ holds by $=\,\subseteq\,\approx$, since $=$ is a $0$-bisimulation.
  Symmetricty holds by $\approx^{-1}\,\subseteq\,\approx$, since $\approx^{-1}$ is a $0$-bisimulation.
  Transitivity holds by $(\approx\circ\approx)\,\subseteq\,\approx$, since $\approx\circ\approx$ is a $0$-bisimulation.
  \hfill$\Box$
\end{proof}

Finally we show the relation $\approx$ characterizes the limit equivalence. 
\begin{proposition}
  $t \approx u$ and $\Lim{t} = \Lim{u}$ are equivalent. 
\end{proposition}
\begin{proof}
  $(\Leftarrow)$: Let $R$ be the limit equivalence relation, namely $tRu \Leftrightarrow \Lim{t}=\Lim{u}$. 
  Then $R$ is a $0$-bisimulation.
  Hence $\Lim{t} = \Lim{u}$ implies $t \approx u$ by $R \subseteq \approx$. 
  
  $(\Rightarrow)$:
  We show this direction by proof by contradiction.
  Define
  \[
  X = \{(t,u) \mid \text{$t \approx u$ and $\Lim{t} \neq \Lim{u}$}\,\}.
  \]
  Assume that $X \neq \emptyset$ (there is a counter example of the $(\Rightarrow)$-direction). 
  For $(t,u)\in X$, we define the difference depth $\sharp(t,u)$
  by $\min\{\,|\pi| \mid (\Lim{t})_{\pi} \neq (\Lim{u})_{\pi}\,\}$. 
  Fix a $(t_0,u_0) \in X$ that has the least difference depth.
  Take $0$-safe normal forms $C_t[\vec{t'}]$ and $C_u[\vec{u'}]$ of $t_0$ and $u_0$, respectively. 
  Then, by $t_0\approx u_0$, we have $C_t = C_u$ and $\vec{t'} \approx \vec{u'}$. 
  Also we have $C_t[\overrightarrow{\Lim{t'}}] = \Lim{t_0}$ and $C_u[\overrightarrow{\Lim{u'}}] = \Lim{u_0}$. 
  By $\Lim{t_0}\neq \Lim{u_0}$ and $C_t=C_u$,
  there is $j$ such that $\Lim{t'_j} \neq \Lim{u'_j}$. 
  Hence we have $(t'_j,u'_j) \in X$. 
  However we also have $\sharp(t'_j,u'_j) < \sharp(t_0,u_0)$,
  since, when we consider the path to $t'_j$ from the root of $t_0$,
  there must be at least one ${\tt cond}$ on the path.
  This contradicts the leastness of $(t_0,u_0)$.
  Therefore we have $X = \emptyset$, namely the $(\Rightarrow)$-direction holds.
  \hfill$\Box$
\end{proof}
  
